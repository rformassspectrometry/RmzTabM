% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/SMF.R
\name{SMF-export}
\alias{SMF-export}
\title{Defining and exporting the mzTab-M Small Molecule Feature table}
\description{
The Small Molecule Feature (SMF) section of the mzTab-M definition captures
information on the individual MS features (quantified regions, e.g.,
elution profiles of specific m/z and retention times) that were measured
across the assays.

The \emph{RmzTabM} package provides a two-step workflow to generate this table:
\enumerate{
\item \strong{Skeleton Generation}: \code{\link[=create_basic_smf]{create_basic_smf()}} takes a numeric matrix of
abundances (rows=features, columns=assays) and creates the basic data
frame structure with the required \code{SMF_ID} and formatted abundance columns.
\item \strong{Finalization}: \code{\link[=finalize_smf]{finalize_smf()}} adds the standard mandatory columns
required by the specification (e.g., \code{exp_mass_to_charge},
\code{retention_time_in_seconds}, \code{charge}) and fills missing values with
"null" strings to ensure compliance with the standard.
}

See also the \href{https://github.com/HUPO-PSI/mzTab-M/blob/main/specification_documents/mzTab_format_specification_2_1-M.adoc#64-small-molecule-feature-smf-section}{specification of the SMF section}
for details.
}
\examples{

## --------------------------------------------------------------------------
## Step 1: Create the basic structure from quantification data
## --------------------------------------------------------------------------

## Assume we have a matrix of abundances (e.g., from XCMS or similar tools)
## Rows are features, Columns are Samples/Assays.
abund_mat <- matrix(
    c(100.1, 105.2, 110.3,
      200.5, 198.2, 201.0,
      50.0, 55.0, 52.1),
    nrow = 3, byrow = TRUE
)

## Create the skeleton table
smf_basic <- create_basic_smf(abund_mat)
head(smf_basic)

## --------------------------------------------------------------------------
## Step 2: Finalize with metadata
## --------------------------------------------------------------------------

## Define feature metadata (vectors must match number of rows in matrix)
mz_values <- c(150.05, 200.10, 300.15)
rt_values <- c(20.5, 35.1, 40.0)
adducts <- c("[M+H]+", "[M+Na]+", "[M+H]+")

## Create the final dataframe ready for export
## Note: Fields not provided (like charge) are automatically set to "null"
smf_final <- finalize_smf(
    smf_df = smf_basic,
    exp_mass_to_charge = mz_values,
    retention_time_in_seconds = rt_values,
    adduct_ion = adducts
)

## The result contains the 'SFH' line prefix, standard columns, and
## abundances
head(smf_final)
}
\author{
Philippine Louail, Johannes Rainer
}
